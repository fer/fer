---
description: >-
  Linux and other variants of UNIX make up a very large segment of the overall
  internet infrastructure (including Critical Infrastructure).
---

# ‚≠ê WIP - Linux Exploitation

{% hint style="danger" %}
**This document is still in progress...** 
{% endhint %}

## Information Gathering

Information gathering and enumeration phases of any penetration test are considered the most important.

It is the result of these phases of the engagement that lead us to identify vulnerabilities, misconfigurations and ultimately to exploitation.

### Remote Enumeration - Study Guide

Remote Enumeration is the process of gathering as much information as possible about a target system from across-the-network perspective using all of the tools we have at our disposal.

#### OS Fingerprinting Re-cap

As a typical first step in identifying the OS of a target, we can use `nmap`:

```bash
# --osscan-guess enables aggressive OS detection
nmap -O --osscan-guess <ip_address>

# Open ports that are ususally returned from a port scan can offer OS insights
nmap -v -sT -O <ip_address>
```

The remote enumeration phase often begins with port scans for both TCP and UDP ports against target system/s, including service version fingerprinting `-sV`  and can be accomplished with a `nmap` command:

```bash
nmap -v -sS -sU -sV -n 192.168.0.1/24
```

#### Enumerating NFS

One of these commonly found services is the Network File System protocol, which is a RPC-based file sharing protocol often found configured on Unix-like systems, is typically used to provide access to shared resources, and can be found listening on TCP and/or UDP port 2049. `nmap` can easily identify a system running NFS. Note that since NFS is an RPC-based service and relies on other RPC services \(as `mountd`\) it should be directly queried via the Portmapper service which is found on port TCP and/or UDP 111 when using `nmap` NSE scripts:

```bash
nmap -sT -sU -sV -p2049 <ip_address>
```

An administrator wishing to share files from an NFS server will configure what are known as "exports", which are the mechanism used by NFS in order to export directories, in other words, make entire directories available to other users over the network. Exports configured for any given NFS serve can usually be found in the `/etc/exports` file on a target host locally.

One common issue with NFS is that often administrators will configure exports with little attention to security and usually export directories in a manner that allows any host or IP address to connect, without any authentication and if you're luck, also provide write-access to directories. 

Once we've identified that a server is running NFS, the first thing we want to do is to query it with several `nmap` NS scripts \(`nfs-ls`, `nfs-showmount` and `nfs-stafts`\). We can find them with:

```bash
ls /usr/share/nmap/scripts/ | grep nfs

# now we can obtain results relevant to NFS:
nmap --script nfs-ls, nfs-showmount-nfs-statfs <ip_address>
```

Alternatively we can use the built-in `showmount` command with the `-e` or `--exports` switches to show any exports that would be available to us as well. However, we can see it won't return as much information as `nmap`:

```bash
showmount -e <ip_address>
```

Ideally, an administrator would want to explicitly define \(whitelist\) IP addresses or hosts that should be allowed to connect to the NFS server. Even in the case where our access is restricted due to an NFS whitelist configuration like the above, the output still gives us valuable information regarding which IP addresses or hosts can mount any available exports. In this scenario, that information would be useful in the case we can either spoof our IP address to match a whitelisted IP address or take control of a host which is allowed to connect.

Once we've gathered the relevant NFS server information and have confirmed a misconfiguration, we can attempt to mount the available exported directories. This can be accomplished by first creating a temporary directory as your mount point, and then the exported NFS directory can be mounted:

```bash
mkdir -p /mnt/home/bob
mount -t nfs <nfs_server_ip>:/home/bob /mnt/home/bob -o nolock
mount # just test 
```



### Local Enumeration - Study Guide

### ‚ñ∂ Information Gathering

### Linux Exploitation: Lab 1 - Remote Enumeration

### Linux Exploitation: Lab 2 - Local Enumeration

## Exploitation over the Network

### Remote Exploitation Introduction - Study Guide

### Password Spray Attack - Study Guide

### Exploiting Samba - Study Guide

### Exploiting Shellshock - Study Guide

### Exploiting Heartbleed - Study Guide

### Exploiting Java RMI Registry - Study Guide

### Exploiting Java Deserialization - Study Guide

### Exploiting Tomcat - Study Guide

### ‚ñ∂ Remote Exploitation

## Post Exploitation

### Post Exploitation Introduction - Study Guide

### Privilege Escalation - Study Guide

### Lateral Movement - Study Guide

### Data Exfiltration - Study Guide

### Maintaining Access - Study Guide

### ‚ñ∂ Post-Exploitation and Lateral Movement

### üß™ Linux Exploitation: Lab 3 - Remote Exploitation and Post Exploitation

### üß™ Linux Exploitation: Lab 4 - Lateral Movement

